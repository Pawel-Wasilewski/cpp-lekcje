#include <iostream>
#include <set>
#include <iterator>
#include <fstream>
using namespace std;

void tworzenie(set<int>& sorcik, int ilosc, ofstream& PlikSet) {
    
  

	for(int i=0; i<ilosc; i++) {

		int a = rand() % 999 + 1;
		cout << a << " ";
		sorcik.insert(a);
		
		
		    
		}
            PlikSet << "Posortowane liczby:" << endl;
            for (auto it = sorcik.begin(); it != sorcik.end(); ++it) {
            PlikSet << *it << endl;
	}
	
}

bool szukanie(const set<int>& sorcik, int szukadlo) {
	
	auto lewo = sorcik.begin();
	auto prawo = sorcik.end();
	
	while(lewo != prawo){
	    auto srodek = lewo;
	    advance (srodek, distance(lewo, prawo)/2);
	    
	    
	    if (*srodek == szukadlo){
	        return true;
	    }
	    else if (*srodek < szukadlo){
	        lewo = next(srodek);
	    }
	    else if (*srodek > szukadlo){
	        prawo = srodek;
	    }
	    else{
	        return false;
	    }
	}

	
	}

int main() {
	srand((unsigned)time(NULL));
	set<int> sorcik;
	int ilosc = 100;
	int szukadlo;
	


	cout << "Witaj uzytkowniku!" << endl << "Chcesz wczytac dane z pliku? [Y/N] (N oznacza losowanie)" << endl;

	char answer;
	cin >> answer;

	if (answer == 'Y') {
	    
	} if (answer == 'N') {
	    ofstream PlikSet("liczby_wSecie.txt");

		tworzenie(sorcik, ilosc, PlikSet);

		cout << endl << endl << "Jakiej liczby szukasz? ";
		cin >> szukadlo;

		if(szukanie(sorcik, szukadlo)) {
			cout << "Znaleziono!";
		}
		else{
			cout << "Nie ma :(";
		}

		PlikSet.close();
	} 
	else {
	    cout << "Nie wybrano/Wybrano zle!" << endl << endl;

	}

	return 0;

}
