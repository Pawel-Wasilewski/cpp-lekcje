#include <iostream>
#include <set>
#include <iterator>
#include <fstream>
using namespace std;

void tworzenie(set<int>& sorcik, int ilosc, ofstream& PlikSet){
    
    for(int i=0; i<ilosc; i++){
        

    int a = rand() % 1000;
    cout << a << " ";
    sorcik.insert(a);
    PlikSet << a << endl;
    
    }
}

bool szukanie(const set<int>& sorcik, int lewo, int prawo, int szukadlo){
    
    int srodek;
    int fala = 0;
    bool znaleziono;
    
    while(srodek == szukadlo) {
        srodek = (lewo + prawo)/2;
        
        auto it_sor = next(sorcik.begin(), srodek);
        
        if(*it_sor < szukadlo) {
            /* Jeszcze nie... */
            
            lewo = srodek;
        }
        if(*it_sor > szukadlo){
            /* Jeszcze nie... */
            
            prawo = srodek;
        }
        if(*it_sor == szukadlo){
            /* GG, mamy to */
            
            znaleziono = true;
            return znaleziono;
        }
        if(lewo == prawo && *it_sor != szukadlo) {
            /* Nie ma liczby :( */
            
            znaleziono = false;
            return znaleziono;
        }
        fala++;
    }
    
}

int main(){
    srand((unsigned)time(NULL));
    set<int> sorcik;
    int ilosc;
    int szukadlo;
    cout << "Podaj ilosc liczb: ";
    cin >> ilosc;
    
    ofstream PlikSet("liczby_wSecie.txt");
    
    tworzenie(sorcik, ilosc, PlikSet);
    
    cout << endl << endl << "Jakiej liczby szukasz? ";
    cin >> szukadlo;
    
    int lewo = 0;
    int prawo = sorcik.size() - 1;
    
    
    if(szukanie(sorcik, lewo, prawo, szukadlo)){
        cout << "Znaleziono!";
    }
    else {
        cout << "Nie ma :(";
    }
    
    PlikSet.close();
    
    return 0;
    
}
